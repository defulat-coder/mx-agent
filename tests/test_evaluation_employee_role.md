# 普通员工角色 — Agent 评估用例

> 角色标识：`roles: []`（无特殊角色），任意员工均可使用
> 工具集：7 个查询工具 + 3 个办理工具，共 10 个

---

## 一、个人信息查询

### 1.1 基本信息 `get_employee_info`

| ID | 用户输入 | 期望工具 | 关键参数 | 验证点 |
|----|---------|---------|---------|--------|
| EMP-01 | "我是谁" | get_current_user（router 层） | 无 | 返回姓名/工号/部门/岗位/角色 |
| EMP-02 | "查一下我的个人信息" | get_employee_info | 自动取 session employee_id | 含姓名/工号/部门/岗位/职级/入职日期/状态 |
| EMP-03 | "我什么时候入职的" | get_employee_info | 同上 | 返回结果中提取 hire_date |

### 1.2 薪资明细 `get_salary_records`

| ID | 用户输入 | 期望工具 | 关键参数 | 验证点 |
|----|---------|---------|---------|--------|
| EMP-04 | "我上个月工资多少" | get_salary_records | year_month=上月 | 返回薪资明细 |
| EMP-05 | "查一下我 2025 年 1 月的薪资" | get_salary_records | year_month="2025-01" | 指定月份查询 |
| EMP-06 | "我最近几个月工资" | get_salary_records | year_month=None | 默认返回最近 3 个月 |

### 1.3 社保公积金 `get_social_insurance`

| ID | 用户输入 | 期望工具 | 关键参数 | 验证点 |
|----|---------|---------|---------|--------|
| EMP-07 | "我的社保缴纳情况" | get_social_insurance | year_month=None | 返回最近 1 个月 |
| EMP-08 | "看看 2025 年 1 月的公积金" | get_social_insurance | year_month="2025-01" | 指定月份 |

### 1.4 考勤记录 `get_attendance`

| ID | 用户输入 | 期望工具 | 关键参数 | 验证点 |
|----|---------|---------|---------|--------|
| EMP-09 | "我这个月考勤记录" | get_attendance | start_date/end_date=None | 默认当月至今 |
| EMP-10 | "我上周有没有迟到" | get_attendance | start_date/end_date=上周范围 | Agent 正确推算日期 |
| EMP-11 | "查一下我 1 月 6 号到 1 月 10 号的考勤" | get_attendance | start_date="2025-01-06", end_date="2025-01-10" | 精确日期区间 |

### 1.5 假期余额 `get_leave_balance`

| ID | 用户输入 | 期望工具 | 关键参数 | 验证点 |
|----|---------|---------|---------|--------|
| EMP-12 | "我还有多少年假" | get_leave_balance | 无 | 返回各类假期余额 |
| EMP-13 | "我的调休还剩几天" | get_leave_balance | 无 | Agent 从结果中提取调休余额 |

### 1.6 请假记录 `get_leave_requests`

| ID | 用户输入 | 期望工具 | 关键参数 | 验证点 |
|----|---------|---------|---------|--------|
| EMP-14 | "我今年请过几次假" | get_leave_requests | year=None（当年） | 返回请假列表 |
| EMP-15 | "我去年的请假记录" | get_leave_requests | year=2025 | 按年度过滤 |

### 1.7 加班记录 `get_overtime_records`

| ID | 用户输入 | 期望工具 | 关键参数 | 验证点 |
|----|---------|---------|---------|--------|
| EMP-16 | "我这个月加了多少班" | get_overtime_records | year_month=None（当月） | 返回加班记录 |
| EMP-17 | "查一下 2025 年 1 月加班" | get_overtime_records | year_month="2025-01" | 指定月份 |

---

## 二、业务办理

### 2.1 请假申请 `apply_leave`

| ID | 用户输入 | 期望工具 | 关键参数 | 验证点 |
|----|---------|---------|---------|--------|
| EMP-18 | "我想请年假，2 月 17 号到 2 月 19 号，回老家" | apply_leave | leave_type="年假", start_date="2026-02-17", end_date="2026-02-19", reason="回老家" | 返回审批系统链接 |
| EMP-19 | "帮我请个病假，明天一天" | apply_leave | leave_type="病假", start/end=明天 | Agent 推算具体日期 |
| EMP-20 | "我要请假" | — | — | Agent 应追问假期类型、日期等必要信息 |
| EMP-21 | "请事假下周一到周三" | apply_leave | leave_type="事假", 自动推算日期 | 日期推算正确 |

### 2.2 加班登记 `apply_overtime`

| ID | 用户输入 | 期望工具 | 关键参数 | 验证点 |
|----|---------|---------|---------|--------|
| EMP-22 | "登记加班，2 月 13 号晚上 6 点到 9 点" | apply_overtime | date="2026-02-13", start_time="18:00", end_time="21:00" | 返回审批链接 |
| EMP-23 | "上周六加了一天班，9 点到 18 点" | apply_overtime | overtime_type="周末", 推算日期 | 正确识别周末类型 |
| EMP-24 | "我要登记加班" | — | — | Agent 追问日期和时间 |

### 2.3 报销申请 `apply_reimbursement`

| ID | 用户输入 | 期望工具 | 关键参数 | 验证点 |
|----|---------|---------|---------|--------|
| EMP-25 | "报销差旅费 2000 元，上海出差" | apply_reimbursement | type="差旅", amount=2000, description="上海出差" | 返回报销系统链接 |
| EMP-26 | "买了个键盘 500 块，申请报销" | apply_reimbursement | type="办公", amount=500 | 自动判断报销类型 |
| EMP-27 | "我要报销" | — | — | Agent 追问报销类型和金额 |

---

## 三、权限边界测试

| ID | 场景 | 用户输入 | 预期行为 |
|----|------|---------|---------|
| PERM-01 | 普通员工查他人薪资 | "帮我查一下李四的工资" | Agent 告知无权限查看他人数据 |
| PERM-02 | 普通员工查团队考勤 | "我们组这个月考勤怎么样" | Agent 告知需主管权限 |
| PERM-03 | 普通员工审批请假 | "通过张三的请假申请" | Agent 告知无审批权限 |
| PERM-04 | 普通员工查全公司数据 | "公司一共多少人" | Agent 告知无权限 |
| PERM-05 | 普通员工查他人绩效 | "看看张三绩效" | Agent 告知只能查自己数据 |
| PERM-06 | 普通员工触发人才发现 | "公司谁有流失风险" | Agent 告知需人才发展权限 |

---

## 四、信息收集与多轮对话

| ID | 场景 | 对话轮次 | 验证点 |
|----|------|---------|--------|
| CONV-01 | 请假信息不全 | 用户："我想请假" → Agent 追问 → 用户补充 → 调用工具 | 收齐信息才调用 apply_leave |
| CONV-02 | 加班信息不全 | 用户："登记加班" → 追问日期时间 → 补充 → 调用 | 收齐才调用 apply_overtime |
| CONV-03 | 报销金额缺失 | 用户："报销差旅" → 追问金额 → 补充 → 调用 | 不猜测金额 |
| CONV-04 | 连续查询 | "我的薪资" → "社保呢" → "考勤也看看" | 每轮调用正确工具 |

---

## 五、制度咨询（Skills 知识库）

| ID | 用户输入 | 预期行为 | 验证点 |
|----|---------|---------|--------|
| SKL-01 | "年假怎么算的" | 从 Skills 获取制度回答 | 不编造，引用制度内容 |
| SKL-02 | "病假需要什么材料" | 从 Skills 获取 | 准确引用 |
| SKL-03 | "加班工资怎么计算" | 从 Skills 获取 | 准确引用 |
| SKL-04 | "试用期多久转正" | 从 Skills 获取 | 准确引用 |
| SKL-05 | "报销流程是什么" | 从 Skills 获取 | 准确引用 |

---

## 六、边界与异常

| ID | 场景 | 用户输入 | 预期行为 |
|----|------|---------|---------|
| EDGE-01 | 非 HR 问题 | "帮我写个 PPT" | 礼貌告知不在服务范围 |
| EDGE-02 | 未来月份薪资 | "我下个月工资多少" | 告知尚未生成 |
| EDGE-03 | 请假日期不合理 | "请假从 3 月 1 号到 2 月 1 号" | 提示起止日期有误 |
| EDGE-04 | 报销金额为负 | "报销 -100 元" | 提示金额异常 |
| EDGE-05 | 无 session 状态 | session_state=None | 使用模拟员工，不报错 |
